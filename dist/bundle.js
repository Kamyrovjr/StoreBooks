document.addEventListener("DOMContentLoaded",(function(){function e(e,t){const n=function(e,t){const n=t.toLowerCase().trim();return e.filter((e=>e.name.toLowerCase().includes(n)))}(e,t),a=document.querySelectorAll(".main__section__block-library__wrapper__row-container__book");n.length>0?function(e,t){e.forEach((e=>{const n=e.dataset.dataid;t.some((e=>e.id===n))?e.style.display="block":e.style.display="none"}))}(a,n):(function(e){e.forEach((e=>{e.style.display="none"}))}(a),document.createElement("p").textContent="No books found.")}axios.get("https://65bc9541b51f9b29e931ca00.mockapi.io/book/book").then((t=>{const n=t.data;!function(e){const t=document.querySelector(".main__section__block-library__wrapper"),n=document.createElement("div");n.className="main__section__block-library__wrapper__row-container",e.forEach((e=>{const t=document.createElement("div");t.className="main__section__block-library__wrapper__row-container__book",t.dataset.genre=e.genre,t.dataset.language=e.language,t.dataset.format=e.format,t.dataset.publishing=e.publishing,t.dataset.dataid=e.id;const a=document.createElement("div");a.className="main__section__block-library__wrapper__row-container__book__img-all-books";const o=document.createElement("img");o.src=e.avatar,o.alt="",o.width="217",o.height="303";const c=document.createElement("div");c.className="main__section__block-library__wrapper__row-container__book__stars";const r=document.createElement("img");r.src=e.starsImg,r.alt="",r.width="127",r.height="16.6";const _=document.createElement("a");_.href=`/page/page-book.html?id=${e.id}`,_.className="main__section__block-library__wrapper__row-container__book__text",_.textContent=e.name;const i=document.createElement("div");i.className="main__section__block-library__wrapper__row-container__book__price";const l=document.createElement("p");l.className="main__section__block-library__wrapper__row-container__book__price__now",l.textContent=`${e.price.now} $`;const d=document.createElement("p");d.className="main__section__block-library__wrapper__row-container__book__price__earlier",d.textContent=`${e.price.earlier} $`;const s=document.createElement("div");s.className="main__section__block-library__wrapper__row-container__book__buttons";const m=document.createElement("a");m.href=`/page/page-book.html?id=${e.id}`;const p=document.createElement("button");p.className="main__section__block-library__wrapper__row-container__book__buttons__read-online",p.textContent="Читать онлайн";const u=document.createElement("div");u.className="main__section__block-library__wrapper__row-container__book__buttons__cart";const b=document.createElement("img");b.className="main__section__block-library__wrapper__row-container__book__buttons__cart__img",b.src=e.cartImg,b.alt="",b.width="35",b.height="45",b.addEventListener("click",(function(){const t={id:e.id,name:e.name,price:e.price.now,avatar:e.avatar};axios.post("https://65bc9541b51f9b29e931ca00.mockapi.io/cart",t).then((e=>{console.log("Книга успешно добавлена в корзину:",e.data)})).catch((e=>{console.error("Ошибка при добавлении книги в корзину:",e)}))})),a.appendChild(o),c.appendChild(r),i.appendChild(l),i.appendChild(d),m.appendChild(p),u.appendChild(b),t.appendChild(a),t.appendChild(c),t.appendChild(_),t.appendChild(i),t.appendChild(s),s.appendChild(m),s.appendChild(u),n.appendChild(t)})),t.appendChild(n)}(n);const a=document.getElementById("inputSearch");document.querySelector(".main__header__wrapper__search__border__img").addEventListener("click",(()=>{const t=a.value.trim();e(n,t)})),a.addEventListener("input",(()=>{const t=a.value.trim();e(n,t)})),document.querySelector(".main__section__block-library__wrapper__btn").addEventListener("click",(()=>{!function(e,t,n,a,o){const c=t.value,r=n.value,_=a.value,i=o.value;document.querySelectorAll(".main__section__block-library__wrapper__row-container__book").forEach((e=>{const t=e.dataset.genre,n=e.dataset.language,a=e.dataset.format,o=e.dataset.publishing;"All"!==c&&c!==t||"All"!==r&&r!==n||"All"!==_&&_!==a||"All"!==i&&i!==o?e.style.display="none":(e.style.display="flex",e.style.justifyContent="start")}))}(0,document.getElementById("genre"),document.getElementById("language"),document.getElementById("format"),document.getElementById("publishing"))})),function(e){const t=document.getElementById("genre"),n=document.getElementById("language"),a=document.getElementById("format"),o=document.getElementById("publishing"),c=[...new Set(e.map((e=>e.publishing)))],r=[...new Set(e.map((e=>e.genre)))],_=[...new Set(e.map((e=>e.language)))],i=[...new Set(e.map((e=>e.format)))];c.forEach((e=>{const t=document.createElement("option");t.value=e,t.textContent=e,o.appendChild(t)})),i.forEach((e=>{const t=document.createElement("option");t.value=e,t.textContent=e,a.appendChild(t)})),r.forEach((e=>{const n=document.createElement("option");n.value=e,n.textContent=e,t.appendChild(n)})),_.forEach((e=>{const t=document.createElement("option");t.value=e,t.textContent=e,n.appendChild(t)}))}(n)})).catch((e=>console.error("Ошибка при получении данных из API:",e)))}));